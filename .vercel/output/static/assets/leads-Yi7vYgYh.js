import{r as o,b as F,j as e,C as I,c as P,d as U,e as _,B as N,f as H,g as O}from"./index-BhShMgCK.js";import{a as C}from"./api-CEFOjK8t.js";import{T as V,a as D,b as h,c as n,d as Q,e as c}from"./table-CbE_oz1G.js";import{C as b,U as R}from"./import-leads-8jIQWl06.js";import{S as f,a as L,b as S,c as y,d as l}from"./dialog-WUoby_ld.js";import{u as z,F as W}from"./funnel-BQjfxwF7.js";import{U as $}from"./index-CzbL-Jco.js";import{A as q}from"./arrow-up-down-DB451iIV.js";import"./index-Bnoxgq91.js";const te=()=>{const[v,j]=o.useState(!1),[d,m]=o.useState([]),[u,w]=o.useState("name"),[p,T]=o.useState("all"),{results:r,status:i,loadMore:k,isLoading:x}=z(C.leads.getLeads,{sortBy:u},{initialNumItems:10}),M=F(C.leads.getLeadsCount,{filterCategory:p}),g=d.length,B=s=>{m(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},A=()=>{const s=r.map(a=>a._id),t=s.every(a=>d.includes(a));m(t?a=>a.filter(E=>!s.includes(E)):a=>[...new Set([...a,...s])])};return e.jsxs(I,{className:"border-border m-4",children:[e.jsx(P,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm",children:"Leads"}),e.jsxs(_,{className:"text-sm",children:["Showing ",r.length," of ",M??0," leads found"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[g>0&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:[g," selected"]})}),e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>j(!0),className:"w-24 h-10 border-border text-sm bg-transparent cursor-pointer",children:[e.jsx($,{className:"h-3 w-3 mr-1"}),"Import"]}),e.jsxs(f,{value:p,onValueChange:T,children:[e.jsxs(L,{className:"w-24 h-7 cursor-pointer border-border text-sm",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),e.jsx(S,{})]}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All"}),e.jsx(l,{value:"hot",children:"Hot"}),e.jsx(l,{value:"warm",children:"Warm"}),e.jsx(l,{value:"cold",children:"Cold"})]})]}),e.jsxs(f,{value:u,onValueChange:w,children:[e.jsxs(L,{className:"w-28 cursor-pointer h-7 border-border text-sm",children:[e.jsx(q,{className:"h-3 w-3 mr-1"}),e.jsx(S,{})]}),e.jsxs(y,{children:[e.jsx(l,{value:"name",children:"Name"}),e.jsx(l,{value:"email",children:"Email"}),e.jsx(l,{value:"company",children:"Company"})]})]})]})]})}),e.jsxs(H,{className:"pt-0",children:[e.jsxs(V,{className:"table-dense",children:[e.jsx(D,{children:e.jsxs(h,{children:[e.jsx(n,{className:"w-8",children:e.jsx(b,{checked:r.length>0&&d.length>0&&r.every(s=>d.includes(s._id)),onCheckedChange:A,"aria-label":"Select all leads on this page"})}),e.jsx(n,{className:"text-sm",children:"Name"}),e.jsx(n,{className:"text-sm",children:"Email"}),e.jsx(n,{className:"text-sm",children:"Company"}),e.jsx(n,{className:"text-sm",children:"Category"}),e.jsx(n,{className:"text-sm text-right",children:"Actions"})]})}),e.jsx(Q,{children:x&&i==="LoadingFirstPage"?e.jsx(h,{children:e.jsx(c,{colSpan:6,className:"text-center",children:"Loading leads..."})}):r.map(s=>e.jsxs(h,{className:"cursor-pointer hover:bg-accent",children:[e.jsx(c,{onClick:t=>t.stopPropagation(),children:e.jsx(b,{checked:d.includes(s._id),onCheckedChange:()=>B(s._id),"aria-label":`Select ${s.name}`})}),e.jsx(c,{className:"font-medium text-sm",children:s.name}),e.jsx(c,{className:"text-sm",children:s.email}),e.jsx(c,{className:"text-sm",children:s.company}),e.jsx(c,{children:e.jsx(O,{className:"text-sm py-0 px-1",children:s.category})})]},s._id))})]}),e.jsxs("div",{className:"flex items-center justify-center mt-4",children:[i==="CanLoadMore"&&e.jsx(N,{variant:"outline",onClick:()=>k(10),disabled:x,children:x?"Loading...":"Load More"}),i==="LoadingMore"&&e.jsx(e.Fragment,{children:"Loading..."}),i==="Exhausted"&&r.length>0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No more leads"})]})]}),e.jsx(R,{open:v,onOpenChange:j})]})};export{te as LeadsPage,te as default};
